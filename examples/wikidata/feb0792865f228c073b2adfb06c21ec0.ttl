@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix schema: <https://schema.org/> .

<https://www.wikidata.org/#query-feb0792865f228c073b2adfb06c21ec0> a sh:SPARQLExecutable,
    sh:SPARQLSelectExecutable;
  rdfs:comment "TODO"@en;
  dcterms:isPartOf <https://www.wikidata.org//wiki/User:Jneubert/SWIB_queries/SWIB_institutions_extended>;
  dcterms:license <https://creativecommons.org/licenses/by-sa/4.0/>;
  sh:prefixes <https://example.org/to_decide/wikidata_prefixes>;
  schema:target <https://query.wikidata.org/sparql>;
  sh:select """PREFIX wikibase: <http://wikiba.se/ontology#>
PREFIX wdt: <http://www.wikidata.org/prop/direct/>
PREFIX wd: <http://www.wikidata.org/entity/>
PREFIX bd: <http://www.bigdata.com/rdf#>
#defaultView:Map
#
# SWIB20 participants' institutions, mapped to Wikidata and enriched from there
#
PREFIX zbwext: <http://zbw.eu/namespaces/zbw-extensions/>
#
# from possibly multi-valued fields, use an arbitrary value
select distinct ?item ?itemLabel (sample(?logo1) as ?logo) (sample(?img) as ?image) (sample(?pos) as ?coord) ?participants
where {
  # institutions' items and count, verbatim 
  values ( ?item ?count ) {
(  wd:Q219694 1 )
(  wd:Q24238356 1 )
(  wd:Q621630 2 )
(  wd:Q189928 1 )
(  wd:Q7352053 1 )
(  wd:Q1490164 2 )
(  wd:Q383931 1 )
(  wd:Q953058 10 )
(  wd:Q684773 3 )
(  wd:Q638395 3 )
(  wd:Q7928986 1 )
(  wd:Q2302311 2 )
(  wd:Q2303432 1 )
(  wd:Q1144262 1 )
(  wd:Q379848 1 )
(  wd:Q833670 2 )
(  wd:Q4376778 2 )
(  wd:Q5243021 1 )
(  wd:Q7320757 1 )
(  wd:Q7895799 2 )
(  wd:Q1503374 1 )
(  wd:Q3179598 1 )
(  wd:Q392189 1 )
(  wd:Q945017 1 )
(  wd:Q861888 1 )
(  wd:Q152838 1 )
(  wd:Q503415 1 )
(  wd:Q76609347 1 )
(  wd:Q1314031 1 )
(  wd:Q902464 1 )
(  wd:Q12719270 1 )
(  wd:Q101024265 1 )
(  wd:Q2901276 1 )
(  wd:Q7892233 2 )
(  wd:Q12061441 1 )
(  wd:Q6410943 1 )
(  wd:Q1247135 1 )
(  wd:Q611833 4 )
(  wd:Q85726762 1 )
(  wd:Q1205728 1 )
(  wd:Q914141 1 )
(  wd:Q92802556 1 )
(  wd:Q1481275 1 )
(  wd:Q18559618 1 )
(  wd:Q13371 2 )
(  wd:Q219555 2 )
(  wd:Q4146639 1 )
(  wd:Q1788342 5 )
(  wd:Q1813732 1 )
(  wd:Q6709869 3 )
(  wd:Q22096046 1 )
(  wd:Q1005530 1 )
(  wd:Q193510 2 )
(  wd:Q1580126 1 )
(  wd:Q1592074 1 )
(  wd:Q1433199 1 )
(  wd:Q209344 1 )
(  wd:Q215616 1 )
(  wd:Q1463036 3 )
(  wd:Q7895142 1 )
(  wd:Q2496355 1 )
(  wd:Q842909 1 )
(  wd:Q676831 3 )
(  wd:Q7895144 1 )
(  wd:Q7686664 2 )
(  wd:Q73495405 2 )
(  wd:Q603034 1 )
(  wd:Q1321380 1 )
(  wd:Q1060 1 )
(  wd:Q2000629 1 )
(  wd:Q1766396 1 )
(  wd:Q263491 1 )
(  wd:Q2324586 1 )
(  wd:Q1234343 2 )
(  wd:Q7804 1 )
(  wd:Q47461569 1 )
(  wd:Q55044 1 )
(  wd:Q193563 3 )
(  wd:Q58241164 1 )
(  wd:Q13122809 1 )
(  wd:Q1912108 1 )
(  wd:Q1266339 1 )
(  wd:Q245966 1 )
(  wd:Q323270 4 )
(  wd:Q28695 2 )
(  wd:Q28738728 1 )
(  wd:Q1861687 1 )
(  wd:Q5440482 3 )
(  wd:Q217741 2 )
(  wd:Q98359549 1 )
(  wd:Q2000624 1 )
(  wd:Q50280985 1 )
(  wd:Q1525831 1 )
(  wd:Q234110 3 )
(  wd:Q2496347 1 )
(  wd:Q3477205 1 )
(  wd:Q1666651 1 )
(  wd:Q190593 7 )
(  wd:Q27863572 5 )
(  wd:Q1475400 1 )
(  wd:Q1383275 2 )
(  wd:Q41984 2 )
(  wd:Q48771349 2 )
(  wd:Q170027 1 )
(  wd:Q683389 3 )
(  wd:Q8778175 1 )
(  wd:Q1705530 1 )
(  wd:Q24576 1 )
(  wd:Q1781394 1 )
(  wd:Q280413 1 )
(  wd:Q258943 1 )
(  wd:Q2496285 2 )
(  wd:Q2473859 1 )
(  wd:Q310695 5 )
(  wd:Q1420239 2 )
(  wd:Q214341 2 )
(  wd:Q2399120 7 )
(  wd:Q1063819 5 )
(  wd:Q838330 4 )
(  wd:Q8288 1 )
(  wd:Q1150105 3 )
(  wd:Q667568 1 )
(  wd:Q7896575 3 )
(  wd:Q1113551 2 )
(  wd:Q1065414 1 )
(  wd:Q1542985 1 )
(  wd:Q23308 2 )
(  wd:Q1133733 3 )
(  wd:Q170109 4 )
(  wd:Q2496326 1 )
(  wd:Q1382220 1 )
(  wd:Q1680376 1 )
(  wd:Q7078369 1 )
(  wd:Q15852122 4 )
(  wd:Q3152021 2 )
(  wd:Q1718711 1 )
(  wd:Q882032 1 )
(  wd:Q1414861 1 )
(  wd:Q15279140 1 )
(  wd:Q845768 2 )
(  wd:Q1514848 1 )
(  wd:Q472316 1 )
(  wd:Q1067935 1 )
(  wd:Q73644758 1 )
(  wd:Q896552 1 )
(  wd:Q49112 0 )
(  wd:Q7895569 1 )
(  wd:Q317179 12 )
(  wd:Q3232931 2 )
(  wd:Q220226 2 )
(  wd:Q666063 1 )
(  wd:Q214867 4 )
(  wd:Q337266 2 )
(  wd:Q5975426 1 )
(  wd:Q1065 10 )
(  wd:Q5671855 2 )
(  wd:Q1670994 1 )
(  wd:Q1073674 1 )
(  wd:Q192334 1 )
(  wd:Q21189104 1 )
(  wd:Q161982 1 )
(  wd:Q201492 1 )
(  wd:Q131454 10 )
(  wd:Q7894377 1 )
(  wd:Q2111400 1 )
(  wd:Q1609326 1 )
(  wd:Q766145 1 )
(  wd:Q432637 2 )
(  wd:Q69491662 1 )
(  wd:Q6269240 1 )
(  wd:Q7449480 1 )
(  wd:Q1664946 1 )
(  wd:Q217659 1 )
(  wd:Q4116241 1 )
(  wd:Q69482138 1 )
(  wd:Q867885 1 )
(  wd:Q69474198 1 )
(  wd:Q683842 1 )
(  wd:Q5503390 3 )
(  wd:Q970652 1 )
(  wd:Q50035308 1 )
(  wd:Q1568237 1 )
(  wd:Q102270482 1 )
(  wd:Q3567094 1 )
(  wd:Q1665236 1 )
(  wd:Q482765 1 )
(  wd:Q2324644 3 )
(  wd:Q673354 1 )
(  wd:Q7919327 1 )
(  wd:Q3456783 1 )
(  wd:Q222450 1 )
(  wd:Q1204536 5 )
(  wd:Q2724353 1 )
(  wd:Q743615 1 )
(  wd:Q253414 2 )
(  wd:Q1165458 1 )
(  wd:Q420747 9 )
(  wd:Q37548 1 )
(  wd:Q168756 3 )
(  wd:Q3181296 1 )
(  wd:Q24943800 1 )
(  wd:Q131626 2 )
(  wd:Q1584459 1 )
(  wd:Q7075970 1 )
(  wd:Q6966612 1 )
(  wd:Q633529 1 )
(  wd:Q2508061 4 )
(  wd:Q17014230 1 )
(  wd:Q385745 1 )
(  wd:Q4914065 1 )
(  wd:Q2496357 3 )
(  wd:Q5014065 2 )
(  wd:Q835960 2 )
(  wd:Q6485425 1 )
(  wd:Q219317 1 )
(  wd:Q875587 4 )
(  wd:Q832226 1 )
(  wd:Q1075339 1 )
(  wd:Q609471 1 )
(  wd:Q101247458 1 )
(  wd:Q621043 2 )
(  wd:Q49206 1 )
(  wd:Q6979225 1 )
(  wd:Q2000129 3 )
(  wd:Q1041671 1 )
(  wd:Q213322 1 )
(  wd:Q3444527 1 )
(  wd:Q155354 2 )
(  wd:Q162222 1 )
(  wd:Q15213548 1 )
(  wd:Q627969 1 )
(  wd:Q1205727 3 )
(  wd:Q189926 2 )
(  wd:Q501851 1 )
(  wd:Q944630 1 )
(  wd:Q564783 6 )
(  wd:Q5530482 1 )
(  wd:Q153006 1 )
(  wd:Q7385045 1 )
(  wd:Q2496307 1 )
(  wd:Q2935605 1 )
(  wd:Q6974124 2 )
(  wd:Q1782948 1 )
(  wd:Q2919540 1 )
(  wd:Q1638442 1 )
(  wd:Q689400 2 )
(  wd:Q41506 4 )
(  wd:Q1210045 1 )
(  wd:Q1020347 1 )
(  wd:Q1049470 1 )
(  wd:Q15568 1 )
(  wd:Q620640 1 )
(  wd:Q3551432 1 )
(  wd:Q2324306 1 )
(  wd:Q17013516 1 )
(  wd:Q1059456 1 )
(  wd:Q46210 2 )
(  wd:Q5645111 1 )
(  wd:Q880794 1 )
(  wd:Q875788 1 )
(  wd:Q1967876 1 )
(  wd:Q10709207 1 )
(  wd:Q6784286 1 )
(  wd:Q20710177 1 )
(  wd:Q309988 1 )
(  wd:Q18572874 4 )
(  wd:Q1526131 5 )
(  wd:Q902065 1 )
(  wd:Q2826570 1 )
(  wd:Q1667757 1 )
(  wd:Q480222 14 )
(  wd:Q503424 2 )
(  wd:Q230492 1 )
(  wd:Q69964174 1 )
(  wd:Q872425 2 )
(  wd:Q6400588 1 )
(  wd:Q2413375 3 )
(  wd:Q1204714 1 )
(  wd:Q204457 2 )
(  wd:Q1068258 2 )
(  wd:Q217439 1 )
(  wd:Q304037 2 )
(  wd:Q52635530 1 )
(  wd:Q253771 1 )
(  wd:Q174710 1 )
(  wd:Q835440 2 )
(  wd:Q685557 3 )
(  wd:Q30634857 1 )
(  wd:Q1664940 2 )
(  wd:Q2605554 1 )
(  wd:Q12449999 1 )
(  wd:Q896706 3 )
(  wd:Q73644786 2 )
(  wd:Q54129 4 )
(  wd:Q4741757 1 )
(  wd:Q82151 2 )
(  wd:Q190260 5 )
(  wd:Q178848 3 )
(  wd:Q206702 1 )
(  wd:Q7895690 3 )
(  wd:Q1681243 1 )
(  wd:Q806703 1 )
(  wd:Q1798499 1 )
(  wd:Q1137652 2 )
(  wd:Q806116 1 )
(  wd:Q2017571 1 )
(  wd:Q390551 1 )
(  wd:Q2982989 1 )
(  wd:Q49117 5 )
(  wd:Q7598806 5 )
(  wd:Q2983704 1 )
(  wd:Q856552 1 )
(  wd:Q2583293 3 )
(  wd:Q1333303 1 )
(  wd:Q685753 1 )
(  wd:Q8896 1 )
(  wd:Q30289521 1 )
(  wd:Q58039052 4 )
(  wd:Q574571 1 )
(  wd:Q49115 4 )
(  wd:Q951305 2 )
(  wd:Q49210 1 )
(  wd:Q101567544 1 )
(  wd:Q1473615 3 )
(  wd:Q219563 1 )
(  wd:Q7747087 6 )
(  wd:Q1145731 1 )
(  wd:Q6017353 1 )
(  wd:Q29293 1 )
(  wd:Q27302 17 )
(  wd:Q280017 1 )
(  wd:Q101243712 1 )
(  wd:Q7707473 1 )
(  wd:Q6801308 1 )
(  wd:Q414150 1 )
(  wd:Q1233544 10 )
(  wd:Q432475 1 )
(  wd:Q20523097 3 )
(  wd:Q1727492 1 )
(  wd:Q49212 1 )
(  wd:Q56249056 1 )
(  wd:Q165980 4 )
(  wd:Q201787 2 )
(  wd:Q622015 1 )
(  wd:Q924551 4 )
(  wd:Q3698008 1 )
(  wd:Q414188 2 )
(  wd:Q317070 1 )
(  wd:Q4383730 1 )
(  wd:Q1806348 2 )
(  wd:Q179501 1 )
(  wd:Q18085187 11 )
(  wd:Q144488 1 )
(  wd:Q4903496 1 )
(  wd:Q162684 1 )
(  wd:Q42411212 2 )
(  wd:Q1674548 1 )
(  wd:Q913250 2 )
(  wd:Q6050910 1 )
(  wd:Q8880 1 )
(  wd:Q7587511 1 )
(  wd:Q28734805 1 )
(  wd:Q152087 2 )
(  wd:Q1054319 1 )
(  wd:Q7895109 1 )
(  wd:Q256507 1 )
(  wd:Q1108197 2 )
(  wd:Q457281 1 )
(  wd:Q49126 1 )
(  wd:Q1895354 2 )
(  wd:Q616527 1 )
(  wd:Q1965176 1 )
(  wd:Q186844 1 )
(  wd:Q263064 1 )
(  wd:Q7896490 3 )
(  wd:Q238101 2 )
(  wd:Q401034 1 )
(  wd:Q22079853 1 )
(  wd:Q1391290 1 )
(  wd:Q749718 1 )
(  wd:Q1277776 1 )
(  wd:Q98831594 1 )
(  wd:Q5171572 1 )
(  wd:Q510324 1 )
(  wd:Q180865 4 )
(  wd:Q3105568 1 )
(  wd:Q872398 1 )
(  wd:Q151510 1 )
(  wd:Q1047060 1 )
(  wd:Q39072675 1 )
(  wd:Q49114 2 )
(  wd:Q5620356 1 )
(  wd:Q4682076 1 )
(  wd:Q188915 2 )
(  wd:Q1360303 1 )
(  wd:Q1124657 1 )
(  wd:Q1576755 1 )
(  wd:Q235034 1 )
  }
  bind(concat(str(?count), ' participant', if(?count > 1, 's', '')) as ?participants)
  optional { ?item wdt:P18 ?img . }
  optional { ?item wdt:P154 ?logo1 . }
  optional { ?item wdt:P625 ?pos1 . }
  optional { ?item wdt:P159/wdt:P625 ?pos2 . }
  optional { ?item wdt:P131/wdt:P625 ?pos3 . }
  optional { ?item wdt:P17/wdt:P625 ?pos4 . }
  # use the most precise position
  bind(coalesce(?pos1, ?pos2, ?pos3, ?pos4) as ?pos)
  SERVICE wikibase:label { bd:serviceParam wikibase:language \"en,[AUTO_LANGUAGE],de,fr,es\". }
}
group by ?item ?itemLabel ?participants""" .
